================================================================================
REPORTE DE PRUEBAS FUNCIONALES
Sistema E-Commerce con Patron SAGA y Redis Cache
================================================================================

Fecha de ejecucion: 2025-11-25 14:23:22
Sistema operativo: macos
Servicios bajo prueba:
  - Order Service:     http://localhost:8080
  - Inventory Service: http://localhost:8081
  - Payment Service:   http://localhost:8082

Generado por: test-saga.sh

Este reporte contiene los resultados de las pruebas funcionales del sistema
de microservicios con patron SAGA para transacciones distribuidas y Redis
para caching, incluyendo:
  - Health checks de los 3 microservicios
  - Verificacion de productos disponibles
  - SAGA exitosa (Reservar -> Pagar -> Confirmar)
  - Redis Cache (medicion de latencia y mejora de rendimiento)
  - SAGA con compensacion (Stock insuficiente)
  - Verificacion de rollback

================================================================================


============================================================================
>>> PRUEBAS FUNCIONALES - SAGA CON REDIS
============================================================================


PRUEBAS INCLUIDAS:
   1. Health Checks de los 3 servicios
   2. Verificacion de productos disponibles
   3. SAGA exitosa (orden con stock suficiente)
   4. Redis Cache - Medicion de rendimiento
      - Cache MISS (primera consulta desde PostgreSQL)
      - Cache HIT (consultas subsecuentes desde Redis)
      - Comparacion de latencias
   5. SAGA con compensacion (stock insuficiente)
   6. Verificacion de rollback del inventario

CASOS DE PRUEBA:
   [OK] Orden con stock disponible -> SAGA COMPLETA -> Status: COMPLETED
   [OK] Cache Redis -> Verificar mejora de rendimiento
   [FAIL] Orden con stock insuficiente -> COMPENSACION SAGA -> Status: FAILED
   [OK] Inventario liberado despues de compensacion




============================================================================
[i] PRUEBA 1: HEALTH CHECKS DE LOS SERVICIOS
============================================================================


>>> 1.1 - Health Check: Order Service (8080)

Respuesta:
[FAIL] TEST #1: Order Service Health (esperado: 200, obtenido: 000)

>>> 1.2 - Health Check: Inventory Service (8081)

Respuesta:
[FAIL] TEST #2: Inventory Service Health (esperado: 200, obtenido: 000)

>>> 1.3 - Health Check: Payment Service (8082)

Respuesta:
[FAIL] TEST #3: Payment Service Health (esperado: 200, obtenido: 000)



============================================================================
[P] PRUEBA 2: VERIFICAR PRODUCTOS EN INVENTARIO
============================================================================


>>> 2.1 - Listar productos disponibles

[i] Consultando inventario...
[!] No se pudieron listar productos (HTTP 000)
[FAIL] TEST #4: Listar productos (esperado: 200, obtenido: 000)

>>> 2.2 - Consultar producto especifico (LAPTOP-001)

[FAIL] Producto no encontrado
[FAIL] TEST #5: Consultar producto LAPTOP-001 (esperado: 200, obtenido: 000)



============================================================================
[OK] PRUEBA 3: SAGA EXITOSA - CREAR ORDEN
============================================================================


>>> 3.1 - Crear orden con stock suficiente

[i] Enviando solicitud de orden...
Request:
{"userId":"test-user-saga-001","paymentMethod":"credit_card","items":[{"productCode":"LAPTOP-001","quantity":1},{"productCode":"MOUSE-001","quantity":2}]}

Response:
[FAIL] SAGA FALLO (Status: )
[FAIL] TEST #6: Crear orden exitosa (SAGA completa) (esperado: 201, obtenido: 000)



============================================================================
[C] PRUEBA 4: VERIFICAR REDIS CACHE
============================================================================

[!] No se pudo obtener orden_id, omitiendo pruebas de cache
ADVERTENCIA: No se pudo probar Redis Cache (orden_id vacio)



============================================================================
[FAIL] PRUEBA 5: SAGA CON COMPENSACION - STOCK INSUFICIENTE
============================================================================


>>> 5.1 - Crear orden con stock INSUFICIENTE

[i] Enviando solicitud con cantidad imposible (10000 unidades)...
[i] Esto deberia disparar la compensacion SAGA...
Request:
{"userId":"test-user-saga-002","paymentMethod":"credit_card","items":[{"productCode":"LAPTOP-001","quantity":10000}]}

Response:
[FAIL] COMPENSACION SAGA FALLO (Status: )
[FAIL] TEST #7: Orden fallida con compensacion SAGA (esperado: 400, obtenido: 000)

>>> 5.2 - Verificar que el inventario NO fue afectado

[i] Consultando producto LAPTOP-001...
[FAIL] TEST #8: Verificar rollback de inventario (esperado: 200, obtenido: 000)



============================================================================
[R] RESUMEN DE PRUEBAS
============================================================================


+================================================================+
|                    RESULTADOS FINALES                          |
+================================================================+
| Total de pruebas:    8
| Pruebas exitosas:    0
| Pruebas fallidas:    8
+================================================================+

[FAIL] Algunas pruebas fallaron. Revisa los logs arriba.

CONCLUSION: Sistema con fallas. Revisar pruebas fallidas.

================================================================================
FIN DEL REPORTE
================================================================================

Archivo generado: test-saga-report-2025-11-25-142322.txt
Fecha: 2025-11-25 14:23:28
Sistema: macos

Para mas informacion, consulta:
- README.md: Guia de usuario
- TEORIA.md: Conceptos tecnicos sobre SAGA y Redis

Capitulo 10: Patrones y herramientas avanzadas para microservicios
- Implementacion de caching con Redis
- Patron SAGA para transacciones distribuidas

================================================================================
[OK] Reporte guardado en: test-saga-report-2025-11-25-142322.txt
