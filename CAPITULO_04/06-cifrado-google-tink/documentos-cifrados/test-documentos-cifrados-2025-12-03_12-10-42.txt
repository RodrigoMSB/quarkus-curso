â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   ğŸ” PRUEBAS DE CIFRADO CON GOOGLE TINK                       â•‘
â•‘   Cifrado a Nivel de AplicaciÃ³n - AES-256-GCM                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ–¥ï¸  Sistema: mac
ğŸ“… Fecha: 03/12/2025 12:10:42
ğŸŒ API Base: http://localhost:8080
ğŸ“„ Resultados: test-documentos-cifrados-2025-12-03_12-10-42.txt
ğŸ”§ Algoritmo: AES-256-GCM (Google Tink)

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   âœ… VERIFICACIÃ“N DE REQUISITOS                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ curl instalado

Verificando conectividad con el servicio...
âœ“ Servicio accesible en http://localhost:8080


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ PRUEBA 1: Crear Documento con Cifrado AutomÃ¡tico
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ Objetivo: Crear un documento y verificar que se cifra automÃ¡ticamente
ğŸ” Algoritmo: AES-256-GCM (Authenticated Encryption)
ğŸ“ Contenido: "InformaciÃ³n confidencial del cliente - DNI: 12345678"

Ejecutando POST /api/v1/documentos...

{
  "contenido": "InformaciÃ³n confidencial del cliente - DNI: 12345678",
  "titulo": "Contrato Confidencial",
  "fechaCreacion": "2025-12-03T12:10:47.126888",
  "id": 1
}

âœ… Documento creado exitosamente con ID: 1

ğŸ’¡ El contenido fue cifrado ANTES de guardarse en PostgreSQL
ğŸ’¡ La API te devuelve el contenido descifrado automÃ¡ticamente


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ PRUEBA 2: Descifrado AutomÃ¡tico al Consultar
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ Objetivo: Verificar que el documento se descifra al consultarlo
ğŸ”“ Proceso: BD guarda cifrado â†’ API descifra â†’ Cliente recibe texto plano

Ejecutando GET /api/v1/documentos/1...

{
  "contenido": "InformaciÃ³n confidencial del cliente - DNI: 12345678",
  "titulo": "Contrato Confidencial",
  "fechaCreacion": "2025-12-03T12:10:47.126888",
  "id": 1
}

âœ… Documento descifrado correctamente
ğŸ’¡ El contenido estÃ¡ cifrado en la BD pero la API lo descifra automÃ¡ticamente


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ PRUEBA 3: Crear MÃºltiples Documentos Cifrados
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ Objetivo: Crear varios documentos con diferentes contenidos
ğŸ“Š Cantidad: 3 documentos

Creando documento 2...
âœ… Documento 2 creado con ID: 2
Creando documento 3...
âœ… Documento 3 creado con ID: 3
Creando documento 4...
âœ… Documento 4 creado con ID: 4

âœ… 4 documentos creados exitosamente, todos cifrados en BD


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ PRUEBA 4: Listar Todos los Documentos
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ Objetivo: Verificar descifrado masivo de mÃºltiples documentos
ğŸ”“ Proceso: Cada documento se descifra automÃ¡ticamente

Ejecutando GET /api/v1/documentos...

[
  {
    "contenido": "InformaciÃ³n confidencial del cliente - DNI: 12345678",
    "titulo": "Contrato Confidencial",
    "fechaCreacion": "2025-12-03T12:10:47.126888",
    "id": 1
  },
  {
    "contenido": "Nombre: Juan PÃ©rez | Email: juan@mail.com | TelÃ©fono: 987654321",
    "titulo": "Datos Personales Cliente VIP",
    "fechaCreacion": "2025-12-03T12:12:23.432486",
    "id": 2
  },
  {
    "contenido": "Score: 850 | Deudas: S/0.00 | LÃ­nea de crÃ©dito: S/50,000",
    "titulo": "Historial Crediticio",
    "fechaCreacion": "2025-12-03T12:12:23.467778",
    "id": 3
  },
  {
    "contenido": "Banco: BCP | Cuenta: 191-1234567-0-89 | CCI: 00219100123456708912",
    "titulo": "InformaciÃ³n Bancaria",
    "fechaCreacion": "2025-12-03T12:12:23.503317",
    "id": 4
  }
]
âœ… Todos los documentos descifrados correctamente
ğŸ’¡ Cada documento se descifrÃ³ individualmente de forma automÃ¡tica


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸ“Š RESUMEN DE PRUEBAS                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… PRUEBA 1: Documento creado y cifrado automÃ¡ticamente
âœ… PRUEBA 2: Descifrado automÃ¡tico al consultar por ID
âœ… PRUEBA 3: MÃºltiples documentos creados con cifrado
âœ… PRUEBA 4: Listado masivo con descifrado automÃ¡tico

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              ğŸ“ CONCEPTOS CLAVE DEMOSTRADOS                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ” AES-256-GCM (AEAD):     Cifrado + AutenticaciÃ³n integrados
ğŸ“¦ Google Tink:            API segura y fÃ¡cil de usar
ğŸ”„ Flujo de Cifrado:       Antes de INSERT en BD
ğŸ”“ Flujo de Descifrado:    DespuÃ©s de SELECT de BD
ğŸ—„ï¸  BD nunca ve:           Texto plano (solo contenido cifrado)
ğŸ”‘ GestiÃ³n de Claves:      CrÃ­tica para producciÃ³n (KMS recomendado)

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              ğŸ” FLUJO COMPLETO DE CIFRADO                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

POST /documentos
    â†“
Cliente envÃ­a: "InformaciÃ³n confidencial"
    â†“
CryptoService.cifrar() â†’ AES-256-GCM
    â†“
PostgreSQL guarda: "AebqJ3oc/tkB8ryE..." â† CIFRADO
    â†“
GET /documentos/1
    â†“
PostgreSQL lee: "AebqJ3oc/tkB8ryE..."
    â†“
CryptoService.descifrar() â†’ Texto plano
    â†“
API devuelve: "InformaciÃ³n confidencial" â† DESCIFRADO

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           âš ï¸  ADVERTENCIAS PARA PRODUCCIÃ“N                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš¨ NO HACER:
   âŒ Regenerar claves en cada inicio
   âŒ Hardcodear claves en cÃ³digo
   âŒ Compartir claves por email

âœ… SÃ HACER:
   âœ“ Usar KMS (AWS/Google/Azure)
   âœ“ RotaciÃ³n de claves periÃ³dica
   âœ“ Auditar accesos a datos
   âœ“ Backup seguro de claves


ğŸ“ Log completo guardado en: test-documentos-cifrados-2025-12-03_12-10-42.txt

ğŸ‰ Â¡Pruebas de cifrado completadas exitosamente!

