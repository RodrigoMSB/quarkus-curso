â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘    ğŸ” PRUEBAS DE SEGURIDAD - PARTE 1: AUTENTICACIÃ“N BÃSICA    â•‘
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—

ğŸ“… Fecha: 21/11/2025 14:27:05
ğŸŒ API Base: http://localhost:8080
ğŸ“„ Resultados: test-part1-security-2025-11-21_14-27-05.txt
ğŸ” Seguridad: Basic Authentication + Role-Based Access Control

âš ï¸  IMPORTANTE: El servidor debe iniciarse con el perfil parte1
   Comando: ./mvnw quarkus:dev -Dquarkus.profile=parte1


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ PRUEBA 1: Endpoint PÃºblico - Health Check
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ Objetivo: Verificar que un endpoint con @PermitAll es accesible sin credenciales
ğŸ“ Endpoint: GET /api/admin/secrets/health
ğŸ”“ Seguridad: @PermitAll (sin autenticaciÃ³n requerida)
âœ… Esperado: HTTP 200 OK

Ejecutando...

Response (HTTP 200):
VaultCorp Admin API is running

âœ“ PASS - Endpoint pÃºblico accesible sin autenticaciÃ³n

ğŸ’¡ Resultado esperado:
   El mensaje 'VaultCorp Admin API is running' confirma que el endpoint
   con @PermitAll es accesible sin necesidad de credenciales.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ PRUEBA 2: Acceso NO Autorizado (sin credenciales)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ Objetivo: Verificar que un endpoint protegido rechaza peticiones sin credenciales
ğŸ“ Endpoint: GET /api/admin/secrets/all
ğŸ”’ Seguridad: @RolesAllowed("vault-admin")
âŒ Esperado: HTTP 401 Unauthorized

Ejecutando...

Response (HTTP 401):
(Sin contenido - esperado para 401)

âœ“ PASS - Endpoint correctamente protegido

ğŸ’¡ Resultado esperado:
   HTTP 401 significa: 'No estÃ¡s autenticado, necesito saber quiÃ©n eres'.
   El servidor rechaza la peticiÃ³n porque no se proporcionaron credenciales.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ PRUEBA 3: Acceso Autorizado con rol ADMIN
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ Objetivo: Verificar que un usuario con rol 'vault-admin' puede listar todos los secretos
ğŸ“ Endpoint: GET /api/admin/secrets/all
ğŸ‘¤ Usuario: admin (rol: vault-admin)
ğŸ”’ Seguridad: @RolesAllowed("vault-admin")
âœ… Esperado: HTTP 200 OK + JSON con lista de secretos

Ejecutando...

Response (HTTP 200):
[
  {
    "id": "7aeeffe4-0753-4b54-93bb-7055fc1c9092",
    "name": "API Key ProducciÃ³n",
    "content": "sk_prod_ABC123XYZ",
    "level": "TOP_SECRET",
    "ownerId": "admin",
    "createdAt": "2025-11-21T14:29:34.120371",
    "expiresAt": null
  },
  {
    "id": "c2b2036c-794a-4301-9ed0-1106f1835e88",
    "name": "ContraseÃ±a BD Dev",
    "content": "devPass2024",
    "level": "INTERNAL",
    "ownerId": "emp001",
    "createdAt": "2025-11-21T14:29:34.120381",
    "expiresAt": null
  },
  {
    "id": "98f257f6-013b-46e0-8a0f-330e27033e27",
    "name": "Manual de Usuario",
    "content": "https://docs.vaultcorp.com/manual",
    "level": "PUBLIC",
    "ownerId": "marketing",
    "createdAt": "2025-11-21T14:29:34.120386",
    "expiresAt": null
  },
  {
    "id": "b9db4702-f2e5-4059-9da0-87dcad0ca427",
    "name": "API PÃºblica de Consultas",
    "content": "https://api.vaultcorp.com/public/v1",
    "level": "PUBLIC",
    "ownerId": "marketing",
    "createdAt": "2025-11-21T14:29:34.120391",
    "expiresAt": null
  },
  {
    "id": "7c782d79-09c2-42f7-87dc-ab588adff2ee",
    "name": "Credenciales AWS S3",
    "content": "AKIAIOSFODNN7EXAMPLE",
    "level": "CONFIDENTIAL",
    "ownerId": "ops",
    "createdAt": "2025-11-21T14:29:34.120394",
    "expiresAt": null
  },
  {
    "id": "2402aab8-4045-42a7-9af7-b5e718dd3086",
    "name": "Token Analytics Premium",
    "content": "analytics_premium_token_xyz789",
    "level": "CONFIDENTIAL",
    "ownerId": "analytics",
    "createdAt": "2025-11-21T14:29:34.120398",
    "expiresAt": null
  }
]

âœ“ PASS - Usuario admin autorizado correctamente

ğŸ’¡ Resultado esperado:
   El usuario 'admin' tiene el rol 'vault-admin' requerido por el endpoint,
   por lo tanto puede acceder y ver la lista completa de secretos.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ PRUEBA 4: Acceso Prohibido por Rol Insuficiente
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ Objetivo: Verificar que un usuario autenticado pero SIN el rol requerido es rechazado
ğŸ“ Endpoint: GET /api/admin/secrets/all
ğŸ‘¤ Usuario: auditor (rol: vault-auditor)
ğŸ”’ Seguridad: @RolesAllowed("vault-admin") - El auditor NO tiene este rol
âŒ Esperado: HTTP 403 Forbidden

Ejecutando...

Response (HTTP 403):
(Sin contenido - esperado para 403)

âœ“ PASS - AutorizaciÃ³n por roles funcionando correctamente

ğŸ’¡ Resultado esperado:
   HTTP 403 significa: 'SÃ© quiÃ©n eres, pero no tienes permiso para hacer esto'.
   El auditor estÃ¡ autenticado pero NO tiene el rol 'vault-admin' requerido.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ PRUEBA 5: Acceso con MÃºltiples Roles Permitidos
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ Objetivo: Verificar que un endpoint puede permitir mÃºltiples roles
ğŸ“ Endpoint: GET /api/admin/secrets/stats
ğŸ‘¤ Usuario: auditor (rol: vault-auditor)
ğŸ”’ Seguridad: @RolesAllowed({"vault-admin", "vault-auditor"})
âœ… Esperado: HTTP 200 OK + JSON con estadÃ­sticas

Ejecutando...

Response (HTTP 200):
{
  "timestamp": "2025-11-21T14:31:28.16026",
  "totalSecrets": 6
}

âœ“ PASS - El auditor tiene acceso permitido

ğŸ’¡ Resultado esperado:
   Este endpoint permite TANTO a admins COMO a auditores. El auditor puede
   ver estadÃ­sticas generales sin necesidad de tener privilegios de administrador.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ PRUEBA 6: OperaciÃ³n Destructiva Prohibida para Auditor
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ Objetivo: Verificar que un auditor NO puede eliminar secretos (solo lectura)
ğŸ“ Endpoint: DELETE /api/admin/secrets/{id}
ğŸ‘¤ Usuario: auditor (rol: vault-auditor)
ğŸ”’ Seguridad: @RolesAllowed("vault-admin")
âŒ Esperado: HTTP 403 Forbidden

Obteniendo un ID de secreto para probar...
ğŸ“Œ ID del secreto a intentar eliminar: 7aeeffe4-0753-4b54-93bb-7055fc1c9092

Ejecutando DELETE con usuario auditor...

Response (HTTP 403):
(Sin contenido - esperado para 403)

âœ“ PASS - El auditor NO puede eliminar secretos

ğŸ’¡ Resultado esperado:
   Los auditores tienen permisos de solo lectura. No pueden realizar
   operaciones destructivas como eliminar secretos.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ PRUEBA 7: OperaciÃ³n Destructiva Autorizada para Admin
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ Objetivo: Verificar que un admin SÃ puede eliminar secretos
ğŸ“ Endpoint: DELETE /api/admin/secrets/{id}
ğŸ‘¤ Usuario: admin (rol: vault-admin)
ğŸ”’ Seguridad: @RolesAllowed("vault-admin")
âœ… Esperado: HTTP 200 OK + mensaje de Ã©xito

Ejecutando DELETE con usuario admin...

Response (HTTP 200):
{
  "message": "Secret deleted successfully"
}

âœ“ PASS - Admin autorizado para eliminar secretos

ğŸ’¡ Resultado esperado:
   El admin tiene permisos completos y puede realizar operaciones destructivas
   como eliminar secretos del sistema.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ PRUEBA 8: VerificaciÃ³n de EliminaciÃ³n
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ Objetivo: Confirmar que el secreto eliminado ya no existe en el sistema
ğŸ“ Endpoint: GET /api/admin/secrets/all
âœ… Esperado: La lista debe tener un secreto menos

Listando todos los secretos...

Response:
[
  {
    "id": "c2b2036c-794a-4301-9ed0-1106f1835e88",
    "name": "ContraseÃ±a BD Dev",
    "content": "devPass2024",
    "level": "INTERNAL",
    "ownerId": "emp001",
    "createdAt": "2025-11-21T14:29:34.120381",
    "expiresAt": null
  },
  {
    "id": "98f257f6-013b-46e0-8a0f-330e27033e27",
    "name": "Manual de Usuario",
    "content": "https://docs.vaultcorp.com/manual",
    "level": "PUBLIC",
    "ownerId": "marketing",
    "createdAt": "2025-11-21T14:29:34.120386",
    "expiresAt": null
  },
  {
    "id": "b9db4702-f2e5-4059-9da0-87dcad0ca427",
    "name": "API PÃºblica de Consultas",
    "content": "https://api.vaultcorp.com/public/v1",
    "level": "PUBLIC",
    "ownerId": "marketing",
    "createdAt": "2025-11-21T14:29:34.120391",
    "expiresAt": null
  },
  {
    "id": "7c782d79-09c2-42f7-87dc-ab588adff2ee",
    "name": "Credenciales AWS S3",
    "content": "AKIAIOSFODNN7EXAMPLE",
    "level": "CONFIDENTIAL",
    "ownerId": "ops",
    "createdAt": "2025-11-21T14:29:34.120394",
    "expiresAt": null
  },
  {
    "id": "2402aab8-4045-42a7-9af7-b5e718dd3086",
    "name": "Token Analytics Premium",
    "content": "analytics_premium_token_xyz789",
    "level": "CONFIDENTIAL",
    "ownerId": "analytics",
    "createdAt": "2025-11-21T14:29:34.120398",
    "expiresAt": null
  }
]

âœ“ Compara el nÃºmero de secretos actual con el inicial (deberÃ­a ser uno menos)

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸ“Š RESUMEN DE PRUEBAS                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Total de tests:      10
  âœ“ Tests Exitosos:  10
  âœ— Tests Fallidos:  0

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              ğŸ“ CONCEPTOS CLAVE DEMOSTRADOS                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”‘ @PermitAll:      Permite acceso pÃºblico sin autenticaciÃ³n
ğŸ”‘ @RolesAllowed:  Restringe acceso solo a usuarios con roles especÃ­ficos
ğŸ”‘ HTTP 401:        No autenticado (falta identificaciÃ³n)
ğŸ”‘ HTTP 403:        No autorizado (identificado pero sin permiso)
ğŸ”‘ HTTP 200:        OperaciÃ³n exitosa

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           ğŸ” MODELO DE SEGURIDAD: BASIC AUTHENTICATION        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CaracterÃ­sticas de Basic Auth:
  â€¢ Credenciales codificadas en Base64
  â€¢ Enviadas en header: Authorization: Basic <base64>
  â€¢ VerificaciÃ³n en cada request
  â€¢ Roles almacenados en application.properties

Usuarios de Prueba:
  â€¢ admin     â†’ rol: vault-admin (permisos completos)
  â€¢ auditor   â†’ rol: vault-auditor (solo lectura)
  â€¢ employee  â†’ rol: vault-employee (acceso bÃ¡sico)

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸ“ ARCHIVO DE LOG                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ Todas las pruebas han sido guardadas en:
   test-part1-security-2025-11-21_14-27-05.txt

ğŸ’¡ Puedes revisar el log completo en cualquier momento para:
   â€¢ Verificar las respuestas HTTP completas
   â€¢ Compartir los resultados con tu instructor
   â€¢ Documentar el comportamiento del sistema

ğŸ‰ Â¡Pruebas de la Parte 1 completadas exitosamente!

