# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                     PERFIL: PROD (PRODUCCIÃ“N)                            â•‘
# â•‘                  CapÃ­tulo 7: ConfiguraciÃ³n y Perfiles                    â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
# ğŸ¯ FILOSOFÃA:
# "MÃ¡xima seguridad y rendimiento"
#
# Optimizado para:
# - Usuarios reales
# - Transacciones reales
# - Dinero real
# - Cumplimiento regulatorio
#
# ğŸ”§ CARACTERÃSTICAS:
# âœ“ ComisiÃ³n: 2.5% (completa)
# âœ“ LÃ­mite: 50,000 (alto pero controlado)
# âœ“ Proveedor: API premium de pago
# âœ“ Logs: INFO (solo lo importante)
# âœ“ Cache: Activado (15 min, mÃ¡ximo rendimiento)
# âœ“ AuditorÃ­a: Activada (obligatorio)
# ğŸ” API Key: Desde Vault (mÃ¡xima seguridad)
#
# ğŸ’¡ CUÃNDO USAR:
# - Ambiente productivo
# - Usuarios finales
# - Operaciones reales
#
# ğŸš€ CÃ“MO ACTIVAR:
# ./mvnw quarkus:dev -Dquarkus.profile=prod

# ========================================
# PROVEEDOR DE PRODUCCIÃ“N
# ========================================

# API premium de pago con SLA garantizado
tasacorp.provider.name=PremiumProvider
tasacorp.provider.url=https://api.currencylayer.com/live

# âš ï¸ NOTA SOBRE API KEY EN PROD:
# NO se define aquÃ­ porque viene desde Vault (ver abajo)
# La API key se obtiene en tiempo de ejecuciÃ³n desde HashiCorp Vault
# Esto garantiza que el secreto NUNCA toque git ni properties

# ========================================
# LÃMITES Y COMISIONES
# ========================================

# LÃ­mite alto para producciÃ³n
# 50,000 PEN es suficiente para operaciones normales
# pero previene transacciones fraudulentas excesivas
tasacorp.transaction.limit=50000

# ComisiÃ³n completa de producciÃ³n
# 2.5% es la comisiÃ³n real del banco
# Ejemplo: 1000 PEN Ã— 3.75 Ã— 2.5% = 93.75 USD comisiÃ³n
tasacorp.commission.rate=2.5

# ========================================
# LOGGING
# ========================================

# Nivel de log en producciÃ³n
# INFO muestra solo eventos importantes
quarkus.log.level=INFO

# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘              CONFIGURACIÃ“N DE VAULT (SOLO PRODUCCIÃ“N)                    â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
# ğŸ” PROPÃ“SITO:
# Integrar HashiCorp Vault para gestiÃ³n segura de secretos en producciÃ³n.
#
# ğŸ’¡ Â¿POR QUÃ‰ VAULT?
#
# PROBLEMA:
# Las API keys y passwords NO deben estar en properties porque:
# - Se versionan en git (quedan en historial PARA SIEMPRE)
# - Son visibles para todo el equipo
# - DifÃ­ciles de rotar (requiere redeploy)
# - Sin auditorÃ­a de accesos
#
# SOLUCIÃ“N - VAULT:
# - Secretos encriptados en reposo
# - Control de acceso granular
# - RotaciÃ³n sin redeploy
# - AuditorÃ­a completa de quiÃ©n accede a quÃ©
# - TTL (Time To Live) para secretos temporales
#
# ğŸ”— CÃ“MO FUNCIONA:
#
# 1. Vault guarda el secreto:
#    vault kv put secret/tasacorp api-key=PREMIUM_KEY_XYZ
#
# 2. Quarkus lo lee al arrancar:
#    quarkus.vault.secret-config-kv-path=tasacorp
#
# 3. Se inyecta en la propiedad:
#    tasacorp.provider.apikey=${api-key}
#                              ^^^^^^^^^
#                              Viene de Vault
#
# 4. El cÃ³digo lo usa normalmente:
#    config.provider().apikey() â†’ "PREMIUM_KEY_XYZ"
#
# ğŸš€ ARRANCAR VAULT:
#
# docker-compose up -d
#
# ğŸ’¾ GUARDAR SECRETO:
#
# docker exec -it tasacorp-vault sh -c \
#   "vault kv put secret/tasacorp api-key=MI_SECRETO"

# ========================================
# VAULT - HABILITADO EN PROD
# ========================================

# URL de Vault
# En este ejercicio: localhost (Vault en Docker)
# En producciÃ³n real: URL interna del cluster
quarkus.vault.url=http://localhost:8200

# Token de autenticaciÃ³n
# En este ejercicio: "root" (Vault en modo dev)
# En producciÃ³n real: Token generado con permisos limitados
# O usar otros mÃ©todos: Kubernetes auth, AppRole, AWS IAM, etc.
quarkus.vault.authentication.client-token=root

# Path donde estÃ¡n los secretos
# Vault almacena secretos en paths jerÃ¡rquicos
# Este path (tasacorp) contiene todos los secretos de la app
quarkus.vault.secret-config-kv-path=tasacorp

# VersiÃ³n del KV engine
# Vault tiene dos versiones del motor Key-Value:
# - v1: Simple key-value (deprecated)
# - v2: Con versionado, rollback, metadatos (recomendado)
quarkus.vault.kv-secret-engine-version=2

# ========================================
# API KEY DESDE VAULT
# ========================================
#
# ğŸ” MAGIA DE LA INTEGRACIÃ“N:
#
# Esta lÃ­nea hace toda la magia:
#
# tasacorp.provider.apikey=${api-key}
#                          ^^^^^^^^^
#                          â”‚
#                          â””â”€ NO es un valor literal
#                             Es una REFERENCIA a Vault
#
# FLUJO COMPLETO:
#
# 1. Quarkus arranca en modo PROD
#    ./mvnw quarkus:dev -Dquarkus.profile=prod
#
# 2. Lee esta propiedad:
#    tasacorp.provider.apikey=${api-key}
#
# 3. Detecta ${...} â†’ Es una referencia, no un valor
#
# 4. Busca en Vault:
#    GET http://localhost:8200/v1/secret/data/tasacorp
#    (usando el token configurado arriba)
#
# 5. Vault responde:
#    { "data": { "api-key": "PREMIUM_KEY_XYZ" } }
#
# 6. Reemplaza la referencia:
#    tasacorp.provider.apikey=PREMIUM_KEY_XYZ
#
# 7. Inyecta en el cÃ³digo:
#    config.provider().apikey() â†’ "PREMIUM_KEY_XYZ"
#
# âœ… RESULTADO:
# El cÃ³digo usa el secreto SIN que estÃ© en properties
# El secreto NUNCA toca git
# El secreto se puede rotar sin recompilar
#
# ğŸ”’ SEGURIDAD:
# - La API key NO estÃ¡ en este archivo
# - NO estÃ¡ en el cÃ³digo fuente
# - NO estÃ¡ en git
# - EstÃ¡ SOLO en Vault (encriptado)
# - Se inyecta en memoria al arrancar
# - Se destruye al terminar la aplicaciÃ³n

# API key de producciÃ³n viene desde Vault
# ${api-key} es el NOMBRE de la clave en Vault
# El valor real se obtiene de: vault kv get secret/tasacorp
tasacorp.provider.apikey=${api-key}