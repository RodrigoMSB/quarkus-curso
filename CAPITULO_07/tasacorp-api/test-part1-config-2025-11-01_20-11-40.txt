â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     âš™ï¸  PRUEBAS DE CONFIGURACIÃ“N - PARTE 1                     â•‘
â•‘     ExternalizaciÃ³n y Prioridades de Carga                    â•‘
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—

ğŸ“… Fecha: 01/11/2025 20:11:40
ğŸŒ API Base: http://localhost:8080
ğŸ“„ Resultados: test-part1-config-2025-11-01_20-11-40.txt
ğŸ”§ ConfiguraciÃ³n: application.properties + application.yaml

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘    âš™ï¸  PRUEBAS DE CONFIGURACIÃ“N - PARTE 1                     â•‘
â•‘    ExternalizaciÃ³n y Prioridades de Carga                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ PRUEBA 1: ConfiguraciÃ³n Base desde Properties
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ Objetivo: Verificar que la aplicaciÃ³n lee la configuraciÃ³n base
ğŸ“„ Fuente: application.properties
ğŸ”§ Valores esperados:
   - Moneda base: PEN
   - ComisiÃ³n: 2.5%
   - LÃ­mite transaccional: 1000

Ejecutando consulta de configuraciÃ³n...

âœ“ Moneda Base: PEN
âœ“ ComisiÃ³n: 0.0%
âœ“ LÃ­mite: $999,999

âœ… Si ves los valores correctos, Â¡la configuraciÃ³n base funciona!


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ PRUEBA 2: InyecciÃ³n de ConfiguraciÃ³n
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ Objetivo: Ver cÃ³mo se inyectan las propiedades en el servicio
ğŸ’‰ Mecanismos:
   - @ConfigProperty: Para valores individuales
   - @ConfigMapping: Para objetos complejos

ğŸ“Š ConfiguraciÃ³n actual completa:

{
    "perfil_activo": "dev",
    "comision_porcentaje": 0.0,
    "auditoria_habilitada": false,
    "monedas_soportadas": [
        "USD",
        "EUR",
        "MXN"
    ],
    "refresh_minutos": 60,
    "ambiente": "desarrollo",
    "aplicacion": "TasaCorp API",
    "proveedor": "MockProvider",
    "proveedor_url": "http://localhost:8080/mock",
    "limite_transaccional": 999999,
    "cache_habilitado": false,
    "moneda_base": "PEN"
}

â„¹ï¸  Todos estos valores fueron inyectados automÃ¡ticamente por Quarkus


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ PRUEBA 3: ConversiÃ³n usando ConfiguraciÃ³n Base
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ Objetivo: Ver cÃ³mo la configuraciÃ³n afecta el comportamiento
ğŸ’° OperaciÃ³n: Convertir 1000 PEN a USD
ğŸ”§ Config: ComisiÃ³n 2.5% (desde properties)

Ejecutando conversiÃ³n...

ğŸ’µ Monto Original: 1000.0 PEN
ğŸ’± Tasa Aplicada: 3.75
ğŸ’± Convertido: 3750.00 USD
ğŸ’¸ ComisiÃ³n (0.0%): 0.00 USD
ğŸ’° Total: 3750.00 USD

âœ… La comisiÃ³n aplicada viene de la configuraciÃ³n (2.5%)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ PRUEBA 4: PreparaciÃ³n - Variables de Entorno
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ Objetivo: Demostrar que ENV vars tienen MAYOR prioridad
ğŸ“Š Prioridades de carga:
   1. System Properties (-D)    â† MÃ¡xima prioridad
   2. Variables de Entorno      â†‘
   3. application.yaml          â†‘
   4. application.properties    â† MÃ­nima prioridad

âš ï¸  IMPORTANTE:
Para probar ENV vars, necesitas reiniciar la aplicaciÃ³n con:

TASACORP_COMMISSION_RATE=9.99 ./mvnw quarkus:dev

Esto sobrescribirÃ¡ la comisiÃ³n de 2.5% a 9.99%

â¸ï¸  Por ahora, continuaremos con System Properties...


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ PRUEBA 5: System Properties (MÃ¡xima Prioridad)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ Objetivo: Demostrar System Properties como mÃ¡xima prioridad
âš™ï¸  System Properties (-D): Son argumentos de la JVM al arrancar

Para probar esto, reinicia la aplicaciÃ³n con:

./mvnw quarkus:dev -Dtasacorp.commission.rate=15.0

ğŸ“Š JerarquÃ­a que se aplicarÃ­a:
   âœ“ System Property: 15.0%      â† Â¡GANA! (mÃ¡xima prioridad)
   âœ— ENV var: 9.99%              â† Ignorado
   âœ— Properties: 2.5%             â† Ignorado

â„¹ï¸  DemostraciÃ³n Visual:

Si aplicaciÃ³n arrancÃ³ con -Dtasacorp.commission.rate=15.0:

â„¹ï¸  ComisiÃ³n actual: 0.0% - Usando configuraciÃ³n base


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ PRUEBA 6: Properties vs YAML
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ Objetivo: Ver valores que vienen de YAML
ğŸ“„ Fuentes:
   - application.properties: ConfiguraciÃ³n simple
   - application.yaml: ConfiguraciÃ³n compleja (tasas, metadata)

Valores desde YAML:

ğŸ“Š Metadata:
   - Ambiente: desarrollo
   - Cache: False
   - AuditorÃ­a: False
   - Refresh: 60 minutos

âœ… YAML permite estructuras jerÃ¡rquicas mÃ¡s complejas


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ PRUEBA 7: Tasas desde ConfiguraciÃ³n YAML
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ Objetivo: Ver tasas de cambio configuradas en YAML
ğŸ’± Tasas configuradas:
   - USD: 3.75 (desde YAML)
   - EUR: 4.10 (desde YAML)
   - MXN: 0.22 (desde YAML)

Consultando tasa de USD...

{
    "moneda_origen": "PEN",
    "moneda_destino": "USD",
    "tasa_cambio": 3.75,
    "comision_porcentaje": 0.0,
    "proveedor": "MockProvider",
    "ambiente": "desarrollo"
}

âœ… Las tasas vienen del application.yaml


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸ“Š RESUMEN DE PRUEBAS                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… PRUEBA 1: ConfiguraciÃ³n base leÃ­da correctamente
âœ… PRUEBA 2: InyecciÃ³n con @ConfigProperty y @ConfigMapping
âœ… PRUEBA 3: ConfiguraciÃ³n afecta el comportamiento (comisiones)
âœ… PRUEBA 4: ExplicaciÃ³n de variables de entorno
âœ… PRUEBA 5: System Properties como mÃ¡xima prioridad
âœ… PRUEBA 6: Diferencias entre Properties y YAML
âœ… PRUEBA 7: Tasas configuradas en YAML

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              ğŸ“ CONCEPTOS CLAVE DEMOSTRADOS                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“„ application.properties:  ConfiguraciÃ³n simple y directa
ğŸ“ application.yaml:        ConfiguraciÃ³n jerÃ¡rquica compleja
ğŸ’‰ @ConfigProperty:         InyecciÃ³n de valores individuales
ğŸ¯ @ConfigMapping:          Mapeo de objetos complejos
ğŸ† Prioridades:             System Props > ENV > YAML > Properties

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸ§ª PRUEBAS MANUALES                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Para probar VARIABLES DE ENTORNO:
1. DetÃ©n la aplicaciÃ³n (Ctrl+C)
2. Ejecuta: TASACORP_COMMISSION_RATE=9.99 ./mvnw quarkus:dev
3. Prueba: curl http://localhost:8080/api/tasas/config
4. VerÃ¡s comision_porcentaje: 9.99 (sobrescrito)

Para probar SYSTEM PROPERTIES:
1. DetÃ©n la aplicaciÃ³n (Ctrl+C)
2. Ejecuta: ./mvnw quarkus:dev -Dtasacorp.commission.rate=15.0
3. Prueba: curl http://localhost:8080/api/tasas/config
4. VerÃ¡s comision_porcentaje: 15.0 (mÃ¡xima prioridad)


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸ“ ARCHIVO DE LOG                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ Todas las pruebas han sido guardadas en:
   test-part1-config-2025-11-01_20-11-40.txt

ğŸ’¡ Puedes revisar el log completo en cualquier momento para:
   â€¢ Verificar las respuestas HTTP completas
   â€¢ Analizar las configuraciones cargadas
   â€¢ Compartir los resultados con tu instructor
   â€¢ Documentar el comportamiento del sistema de configuraciÃ³n

ğŸ‰ Â¡Pruebas de la Parte 1 completadas exitosamente!
ContinÃºa con: test-part2-profiles.sh

