â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     âš™ï¸  PRUEBAS DE CONFIGURACIÃ“N - PARTE 1                     â•‘
â•‘     ExternalizaciÃ³n y Prioridades de Carga                    â•‘
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—

ğŸ“… Fecha: 20/11/2025 09:30:16
ğŸŒ API Base: http://localhost:8080
ğŸ“„ Resultados: test-part1-config-2025-11-20_09-30-16.txt
ğŸ”§ ConfiguraciÃ³n: application.properties + application.yaml


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ PRUEBA 1: ConfiguraciÃ³n Base desde Properties
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ Objetivo: Verificar que la aplicaciÃ³n lee la configuraciÃ³n base
ğŸ“„ Fuente: application.properties
ğŸ”§ Valores esperados:
   - Moneda base: PEN
   - ComisiÃ³n: 0.0% (perfil dev)
   - LÃ­mite transaccional: 999,999

Ejecutando consulta de configuraciÃ³n...

Response (HTTP 200):
{
  "auditoria_habilitada": false,
  "monedas_soportadas": [
    "USD",
    "EUR",
    "MXN"
  ],
  "refresh_minutos": 60,
  "ambiente": "desarrollo",
  "aplicacion": "TasaCorp API",
  "moneda_base": "PEN",
  "perfil_activo": "dev",
  "comision_porcentaje": 0.0,
  "api_key_source": "application.properties",
  "proveedor": "MockProvider",
  "proveedor_url": "http://localhost:8080/mock",
  "limite_transaccional": 999999,
  "cache_habilitado": false
}

âœ“ PASS - ConfiguraciÃ³n base leÃ­da correctamente

ğŸ’¡ Resultado esperado:
   La aplicaciÃ³n carga valores desde application.properties

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ PRUEBA 2: InyecciÃ³n de ConfiguraciÃ³n
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ Objetivo: Ver cÃ³mo se inyectan las propiedades en el servicio
ğŸ’‰ Mecanismos:
   - @ConfigProperty: Para valores individuales
   - @ConfigMapping: Para objetos complejos

ConfiguraciÃ³n actual completa:

{
  "auditoria_habilitada": false,
  "monedas_soportadas": [
    "USD",
    "EUR",
    "MXN"
  ],
  "refresh_minutos": 60,
  "ambiente": "desarrollo",
  "aplicacion": "TasaCorp API",
  "moneda_base": "PEN",
  "perfil_activo": "dev",
  "comision_porcentaje": 0.0,
  "api_key_source": "application.properties",
  "proveedor": "MockProvider",
  "proveedor_url": "http://localhost:8080/mock",
  "limite_transaccional": 999999,
  "cache_habilitado": false
}

âœ“ PASS - Valores inyectados correctamente

â„¹ï¸  Todos estos valores fueron inyectados automÃ¡ticamente por Quarkus


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ PRUEBA 3: ConversiÃ³n usando ConfiguraciÃ³n Base
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ Objetivo: Ver cÃ³mo la configuraciÃ³n afecta el comportamiento
ğŸ’° OperaciÃ³n: Convertir 1000 PEN a USD
ğŸ”§ Config: ComisiÃ³n 0.0% (perfil dev)

Ejecutando conversiÃ³n...

Response (HTTP 200):
{
  "monto_origen": 1000.0,
  "moneda_origen": "PEN",
  "monto_convertido": 3750.0,
  "moneda_destino": "USD",
  "tasa_aplicada": 3.75,
  "comision": 0.0,
  "monto_total": 3750.0,
  "proveedor": "MockProvider",
  "limite_transaccional": 999999,
  "dentro_limite": true
}

âœ“ PASS - ConversiÃ³n realizada correctamente

ğŸ’¡ Resultado esperado:
   La comisiÃ³n del 0.0% viene del perfil dev


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ PRUEBA 4: Variables de Entorno (ExplicaciÃ³n)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ Objetivo: Demostrar que ENV vars tienen MAYOR prioridad
ğŸ“Š Prioridades de carga:
   1. System Properties (-D)    â† MÃ¡xima prioridad
   2. Variables de Entorno      â†‘
   3. application.yaml          â†‘
   4. application.properties    â† MÃ­nima prioridad

âš ï¸  IMPORTANTE:
Para probar ENV vars, necesitas reiniciar la aplicaciÃ³n con:

TASACORP_COMMISSION_RATE=9.99 ./mvnw quarkus:dev

Esto sobrescribirÃ¡ la comisiÃ³n de 0.0% a 9.99%

â¸ï¸  Por ahora, continuaremos con System Properties...


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ PRUEBA 5: System Properties (MÃ¡xima Prioridad)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ Objetivo: Demostrar System Properties como mÃ¡xima prioridad
âš™ï¸  System Properties (-D): Son argumentos de la JVM al arrancar

Para probar esto, reinicia la aplicaciÃ³n con:

./mvnw quarkus:dev -Dtasacorp.commission.rate=15.0

ğŸ“Š JerarquÃ­a que se aplicarÃ­a:
   âœ“ System Property: 15.0%      â† Â¡GANA! (mÃ¡xima prioridad)
   âœ— ENV var: 9.99%              â† Ignorado
   âœ— Properties: 0.0%             â† Ignorado

â„¹ï¸  ConfiguraciÃ³n actual:
{
  "auditoria_habilitada": false,
  "monedas_soportadas": [
    "USD",
    "EUR",
    "MXN"
  ],
  "refresh_minutos": 60,
  "ambiente": "desarrollo",
  "aplicacion": "TasaCorp API",
  "moneda_base": "PEN",
  "perfil_activo": "dev",
  "comision_porcentaje": 0.0,
  "api_key_source": "application.properties",
  "proveedor": "MockProvider",
  "proveedor_url": "http://localhost:8080/mock",
  "limite_transaccional": 999999,
  "cache_habilitado": false
}

âœ“ PASS - DemostraciÃ³n de prioridades explicada


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ PRUEBA 6: Properties vs YAML
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ Objetivo: Ver valores que vienen de YAML
ğŸ“„ Fuentes:
   - application.properties: ConfiguraciÃ³n simple
   - application.yaml: ConfiguraciÃ³n compleja (tasas, metadata)

Valores desde YAML:

{
  "auditoria_habilitada": false,
  "monedas_soportadas": [
    "USD",
    "EUR",
    "MXN"
  ],
  "refresh_minutos": 60,
  "ambiente": "desarrollo",
  "aplicacion": "TasaCorp API",
  "moneda_base": "PEN",
  "perfil_activo": "dev",
  "comision_porcentaje": 0.0,
  "api_key_source": "application.properties",
  "proveedor": "MockProvider",
  "proveedor_url": "http://localhost:8080/mock",
  "limite_transaccional": 999999,
  "cache_habilitado": false
}

âœ“ PASS - YAML permite estructuras jerÃ¡rquicas mÃ¡s complejas


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ PRUEBA 7: Tasas desde ConfiguraciÃ³n YAML
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ Objetivo: Ver tasas de cambio configuradas en YAML
ğŸ’± Tasas configuradas:
   - USD: 3.75 (desde YAML)
   - EUR: 4.10 (desde YAML)
   - MXN: 0.22 (desde YAML)

Consultando tasa de USD...

Response (HTTP 200):
{
  "moneda_origen": "PEN",
  "moneda_destino": "USD",
  "tasa_cambio": 3.75,
  "comision_porcentaje": 0.0,
  "proveedor": "MockProvider",
  "ambiente": "desarrollo"
}

âœ“ PASS - Las tasas vienen del application.yaml


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸ“Š RESUMEN DE PRUEBAS                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Total de tests:      6
  âœ“ Tests Exitosos:  6
  âœ— Tests Fallidos:  0

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                   ğŸ¯ TESTS EJECUTADOS                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… PRUEBA 1: ConfiguraciÃ³n base leÃ­da correctamente
âœ… PRUEBA 2: InyecciÃ³n con @ConfigProperty y @ConfigMapping
âœ… PRUEBA 3: ConfiguraciÃ³n afecta el comportamiento (comisiones)
âœ… PRUEBA 4: ExplicaciÃ³n de variables de entorno
âœ… PRUEBA 5: System Properties como mÃ¡xima prioridad
âœ… PRUEBA 6: Diferencias entre Properties y YAML
âœ… PRUEBA 7: Tasas configuradas en YAML

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              ğŸ“ CONCEPTOS CLAVE DEMOSTRADOS                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“„ application.properties:  ConfiguraciÃ³n simple y directa
ğŸ“ application.yaml:        ConfiguraciÃ³n jerÃ¡rquica compleja
ğŸ’‰ @ConfigProperty:         InyecciÃ³n de valores individuales
ğŸ¯ @ConfigMapping:          Mapeo de objetos complejos
ğŸ† Prioridades:             System Props > ENV > YAML > Properties

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸ§ª PRUEBAS MANUALES                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Para probar VARIABLES DE ENTORNO:
1. DetÃ©n la aplicaciÃ³n (Ctrl+C)
2. Ejecuta: TASACORP_COMMISSION_RATE=9.99 ./mvnw quarkus:dev
3. Prueba: curl http://localhost:8080/api/tasas/config
4. VerÃ¡s comision_porcentaje: 9.99 (sobrescrito)

Para probar SYSTEM PROPERTIES:
1. DetÃ©n la aplicaciÃ³n (Ctrl+C)
2. Ejecuta: ./mvnw quarkus:dev -Dtasacorp.commission.rate=15.0
3. Prueba: curl http://localhost:8080/api/tasas/config
4. VerÃ¡s comision_porcentaje: 15.0 (mÃ¡xima prioridad)

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸ“ ARCHIVO DE LOG                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ Todas las pruebas han sido guardadas en:
   test-part1-config-2025-11-20_09-30-16.txt

ğŸ’¡ Puedes revisar el log completo en cualquier momento para:
   â€¢ Verificar las respuestas HTTP completas
   â€¢ Analizar las configuraciones cargadas
   â€¢ Compartir los resultados con tu instructor
   â€¢ Documentar el comportamiento del sistema de configuraciÃ³n

ğŸ‰ Â¡Pruebas de la Parte 1 completadas exitosamente!
ContinÃºa con: test-part2-profiles.sh

