# ============================================================================
# APLICACIÓN: Sistema de Pre-Aprobación Crediticia Express
# ============================================================================
quarkus.application.name=aprobacion-express
quarkus.application.version=1.0.0

# ============================================================================
# CONFIGURACIÓN DEL SERVIDOR HTTP
# ============================================================================
quarkus.http.port=8080
quarkus.http.host=0.0.0.0
quarkus.http.test-port=8081

# ============================================================================
# CONFIGURACIÓN DE BASE DE DATOS - POSTGRESQL
# ============================================================================

# Datasource principal
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=postgres
quarkus.datasource.password=postgres123
quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/banco_credito

# Pool de conexiones
quarkus.datasource.jdbc.min-size=2
quarkus.datasource.jdbc.max-size=10
quarkus.datasource.jdbc.acquisition-timeout=5

# ============================================================================
# CONFIGURACIÓN DE HIBERNATE ORM
# ============================================================================

# Estrategia de generación de schema
quarkus.hibernate-orm.database.generation=drop-and-create
quarkus.hibernate-orm.sql-load-script=import.sql

# Logs de SQL
quarkus.hibernate-orm.log.sql=false
quarkus.hibernate-orm.log.format-sql=false

# ============================================================================
# LOGGING
# ============================================================================

# Nivel de log general
quarkus.log.level=INFO
quarkus.log.category."pe.banco.aprobacion".level=DEBUG
quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n

# ============================================================================
# CONFIGURACIÓN ESPECÍFICA POR ENTORNO
# ============================================================================

# ----------------------------------------------------------------------------
# PERFIL DE DESARROLLO (%dev)
# ----------------------------------------------------------------------------
%dev.quarkus.http.port=8080
%dev.quarkus.log.level=DEBUG
%dev.quarkus.log.category."pe.banco.aprobacion".level=DEBUG
%dev.quarkus.hibernate-orm.log.sql=true
%dev.quarkus.hibernate-orm.log.format-sql=true

# Dev UI habilitado
%dev.quarkus.dev-ui.always-enable=true

# ----------------------------------------------------------------------------
# PERFIL DE TEST (%test)
# ----------------------------------------------------------------------------
%test.quarkus.datasource.devservices.enabled=true
%test.quarkus.datasource.devservices.image-name=postgres:16-alpine
%test.quarkus.hibernate-orm.database.generation=drop-and-create
%test.quarkus.hibernate-orm.sql-load-script=import.sql
%test.quarkus.log.level=WARN
%test.quarkus.log.category."pe.banco.aprobacion".level=INFO

# ----------------------------------------------------------------------------
# PERFIL DE PRODUCCIÓN (%prod)
# ----------------------------------------------------------------------------
%prod.quarkus.datasource.username=${DB_USERNAME:postgres}
%prod.quarkus.datasource.password=${DB_PASSWORD:postgres123}
%prod.quarkus.datasource.jdbc.url=${DB_URL:jdbc:postgresql://localhost:5432/banco_credito}

# En producción, NO crear/eliminar tablas automáticamente
%prod.quarkus.hibernate-orm.database.generation=validate
%prod.quarkus.hibernate-orm.sql-load-script=no-file

# Pool de conexiones en producción
%prod.quarkus.datasource.jdbc.min-size=5
%prod.quarkus.datasource.jdbc.max-size=50

# ============================================================================
# CONFIGURACIÓN PARA COMPILACIÓN NATIVE (GraalVM)
# ============================================================================

# Habilitar reflection para Jackson (serialización JSON)
quarkus.native.additional-build-args=--initialize-at-build-time=org.postgresql.Driver

# ============================================================================
# HEALTH CHECKS
# ============================================================================
quarkus.smallrye-health.ui.enable=true

# ============================================================================
# MÉTRICAS
# ============================================================================
quarkus.micrometer.enabled=true
quarkus.micrometer.export.prometheus.enabled=true
