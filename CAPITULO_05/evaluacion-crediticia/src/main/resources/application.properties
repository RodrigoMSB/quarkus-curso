# ============================================================================
# CONFIGURACI√ìN GENERAL DE LA APLICACI√ìN
# ============================================================================
# Estas propiedades se aplican a TODOS los perfiles (dev, test, prod)

# Nombre de la aplicaci√≥n (aparece en logs y m√©tricas)
quarkus.application.name=evaluacion-crediticia

# ============================================================================
# DATASOURCE - Configuraci√≥n Base de Datos
# ============================================================================
quarkus.datasource.db-kind=postgresql

# ============================================================================
# HIBERNATE ORM - Gesti√≥n del Esquema de Base de Datos
# ============================================================================
# drop-and-create: Borra y recrea las tablas en CADA inicio
quarkus.hibernate-orm.database.generation=drop-and-create

# Mostrar SQL en consola (√∫til para debugging y aprendizaje)
quarkus.hibernate-orm.log.sql=true

# Archivo SQL con datos iniciales (src/main/resources/import.sql)
quarkus.hibernate-orm.sql-load-script=import.sql

# ============================================================================
# HTTP - Puertos de la Aplicaci√≥n
# ============================================================================
quarkus.http.port=8080
quarkus.http.test-port=8081

# ============================================================================
# LOGGING - Configuraci√≥n de Logs
# ============================================================================
quarkus.log.level=INFO
quarkus.log.category."pe.banco.evaluacion".level=DEBUG

# ============================================================================
# PERFIL DEV - Desarrollo Local
# ============================================================================
# Activado con: ./mvnw quarkus:dev
#
# ‚ö° DEV SERVICES AUTOM√ÅTICO:
# Quarkus detecta que necesitas PostgreSQL y autom√°ticamente:
# 1. Levanta un contenedor Docker con postgres:16-alpine
# 2. Crea una base de datos temporal
# 3. Conecta la aplicaci√≥n a esa BD
# 4. Al detener la app (Ctrl+C), el contenedor se destruye
#
# üìã REQUISITO: Docker Desktop debe estar corriendo
# ============================================================================

# Imagen espec√≠fica de PostgreSQL para Dev Services
%dev.quarkus.datasource.devservices.image-name=postgres:16-alpine

# ============================================================================
# PERFIL TEST - Tests Automatizados
# ============================================================================
# Activado con: ./mvnw test
#
# ‚ö° DEV SERVICES AUTOM√ÅTICO:
# Igual que en dev, Quarkus levanta PostgreSQL en Docker autom√°ticamente.
#
# ‚úÖ VENTAJAS:
# - No necesitas tener PostgreSQL instalado
# - Cada ejecuci√≥n usa una BD limpia (aislamiento total)
# - No contamina tu base de datos de desarrollo
# - Tests reproducibles en cualquier m√°quina con Docker
#
# üìã REQUISITO: Docker Desktop debe estar corriendo
# ============================================================================

# Imagen espec√≠fica de PostgreSQL para tests
%test.quarkus.datasource.devservices.image-name=postgres:16-alpine

# ============================================================================
# PERFIL PROD - Producci√≥n
# ============================================================================
# Activado con: java -jar app.jar o binario nativo
#
# En producci√≥n NO usamos Dev Services. Configuramos BD real.
# Las credenciales se pasan por variables de entorno.
# ============================================================================

%prod.quarkus.devservices.enabled=false
%prod.quarkus.datasource.jdbc.url=${DATABASE_URL:jdbc:postgresql://localhost:5432/evaluacion_db}
%prod.quarkus.datasource.username=${DATABASE_USER:postgres}
%prod.quarkus.datasource.password=${DATABASE_PASSWORD:postgres}

# En producci√≥n, NO recrear tablas (usamos validate o none)
%prod.quarkus.hibernate-orm.database.generation=drop-and-create
%prod.quarkus.hibernate-orm.log.sql=false

# ============================================================================
# RESUMEN DE PERFILES
# ============================================================================
# ./mvnw quarkus:dev  ‚Üí Perfil DEV  ‚Üí Docker autom√°tico (Dev Services)
# ./mvnw test         ‚Üí Perfil TEST ‚Üí Docker autom√°tico (Dev Services)
# java -jar app.jar   ‚Üí Perfil PROD ‚Üí BD configurada por variables de entorno
#
# üéØ PARA ALUMNOS: Solo necesitan Docker Desktop corriendo.
#    No instalar PostgreSQL. Quarkus hace la magia.
# ============================================================================