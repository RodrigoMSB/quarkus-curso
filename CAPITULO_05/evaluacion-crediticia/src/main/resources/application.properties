# ============================================================================
# CONFIGURACI√ìN GENERAL DE LA APLICACI√ìN
# ============================================================================
# Estas propiedades se aplican a TODOS los perfiles (dev, test, prod)
# a menos que se sobrescriban con un prefijo espec√≠fico (%dev, %test, %prod)

# Nombre de la aplicaci√≥n (aparece en logs y m√©tricas)
quarkus.application.name=evaluacion-crediticia

# ============================================================================
# DATASOURCE - Configuraci√≥n Base de Datos
# ============================================================================
# Tipo de base de datos: PostgreSQL
# Otras opciones: mysql, mariadb, h2, oracle, mssql
quarkus.datasource.db-kind=postgresql

# Versi√≥n espec√≠fica de PostgreSQL que usaremos (16.10)
# Esto permite a Quarkus usar caracter√≠sticas espec√≠ficas de esta versi√≥n
quarkus.datasource.db-version=16

# ============================================================================
# HIBERNATE ORM - Gesti√≥n del Esquema de Base de Datos
# ============================================================================
# drop-and-create: Borra y recrea las tablas en CADA inicio
# √ötil para desarrollo, NUNCA usar en producci√≥n
# Otras opciones: create, update, validate, none
quarkus.hibernate-orm.database.generation=drop-and-create

# Mostrar en consola todos los SQL que ejecuta Hibernate
# √ötil para debugging y aprendizaje
quarkus.hibernate-orm.log.sql=true

# Archivo SQL que se ejecuta DESPU√âS de crear las tablas
# Ubicaci√≥n: src/main/resources/import.sql
# Sirve para cargar datos iniciales de prueba
quarkus.hibernate-orm.sql-load-script=import.sql

# ============================================================================
# HTTP - Puertos de la Aplicaci√≥n
# ============================================================================
# Puerto para modo desarrollo (./mvnw quarkus:dev)
quarkus.http.port=8080

# Puerto para tests (./mvnw test)
# Diferente a 8080 para evitar conflictos si dev est√° corriendo
quarkus.http.test-port=8081

# ============================================================================
# LOGGING - Configuraci√≥n de Logs
# ============================================================================
# Nivel de log global: INFO
# Niveles disponibles: TRACE < DEBUG < INFO < WARN < ERROR < FATAL
quarkus.log.level=INFO

# Nivel de log espec√≠fico para nuestro paquete: DEBUG
# Esto muestra logs m√°s detallados solo de nuestro c√≥digo
# pe.banco.evaluacion es el package base de nuestro proyecto
quarkus.log.category."pe.banco.evaluacion".level=DEBUG

# ============================================================================
# PERFIL DEV - Desarrollo Local
# ============================================================================
# Este perfil se activa cuando ejecutas: ./mvnw quarkus:dev
# Usa tu PostgreSQL instalado localmente en tu m√°quina

# Desactivar Dev Services porque usamos PostgreSQL local
# Dev Services levantar√≠a un contenedor Docker, pero no lo necesitamos aqu√≠
%dev.quarkus.devservices.enabled=false

# Driver JDBC de PostgreSQL (ya viene en las dependencias)
%dev.quarkus.datasource.jdbc.driver=org.postgresql.Driver

# URL de conexi√≥n a PostgreSQL local
# Formato: jdbc:postgresql://host:puerto/nombre_base_datos
# localhost:5432 = PostgreSQL local en puerto por defecto
# postgres = nombre de la base de datos
%dev.quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/postgres

# Usuario de PostgreSQL (ajustar seg√∫n tu instalaci√≥n)
%dev.quarkus.datasource.username=rodrigosilva

# Password vac√≠a (sin contrase√±a en desarrollo local)
# Si tu PostgreSQL tiene password, colocarla aqu√≠
%dev.quarkus.datasource.password=

# Versi√≥n de PostgreSQL (16.x)
%dev.quarkus.datasource.db-version=16

# Recrear tablas en cada inicio (√∫til en desarrollo)
%dev.quarkus.hibernate-orm.database.generation=drop-and-create

# Mostrar SQL en consola (√∫til para aprender y debugging)
%dev.quarkus.hibernate-orm.log.sql=true

# ============================================================================
# PERFIL PROD - Producci√≥n
# ============================================================================
# Este perfil se activa cuando ejecutas con: -Dquarkus.profile=prod
# O cuando generas un ejecutable nativo

# NO recrear tablas en producci√≥n (las tablas ya existen)
# none = No tocar el esquema de base de datos
# Las migraciones se har√≠an con Flyway o Liquibase
%prod.quarkus.hibernate-orm.database.generation=none

# NO mostrar SQL en producci√≥n (mejora rendimiento y seguridad)
%prod.quarkus.hibernate-orm.log.sql=false

# URL de conexi√≥n desde variable de entorno
# En producci√≥n NUNCA hardcodear datos sensibles
# Se configura en el servidor: export DATABASE_URL=jdbc:postgresql://...
%prod.quarkus.datasource.jdbc.url=${DATABASE_URL}

# Usuario desde variable de entorno
# Se configura en el servidor: export DATABASE_USER=usuario_prod
%prod.quarkus.datasource.username=${DATABASE_USER}

# Password desde variable de entorno
# Se configura en el servidor: export DATABASE_PASSWORD=password_seguro
%prod.quarkus.datasource.password=${DATABASE_PASSWORD}

# Versi√≥n de PostgreSQL en producci√≥n (16.x)
%prod.quarkus.datasource.db-version=16

# ============================================================================
# PERFIL TEST - Tests Automatizados
# ============================================================================
# Este perfil se activa autom√°ticamente cuando ejecutas: ./mvnw test
#
# ‚ö° IMPORTANTE - Dev Services Autom√°tico:
# Como NO hay configuraci√≥n de URL, username ni password para %test,
# Quarkus activa autom√°ticamente "Dev Services" que:
#
# 1. Detecta que necesitas PostgreSQL
# 2. Levanta autom√°ticamente un contenedor Docker con postgres:16-alpine
# 3. Crea una base de datos temporal
# 4. Ejecuta los tests contra esa base de datos
# 5. Destruye el contenedor al terminar los tests
#
# ‚úÖ VENTAJAS:
# - No necesitas tener PostgreSQL instalado para correr tests
# - Cada ejecuci√≥n de tests usa una BD limpia (aislamiento)
# - No contamina tu base de datos de desarrollo
# - Los tests son reproducibles en cualquier m√°quina con Docker
#
# üìã REQUISITOS:
# - Docker Desktop debe estar corriendo
# - No configurar jdbc.url, username ni password en %test
#
# üéØ RESULTADO:
# ./mvnw test ‚Üí Levanta Docker autom√°tico con PostgreSQL 16
# Los tests corren contra esa BD temporal
# Al terminar, el contenedor se destruye
#
# NO agregar estas l√≠neas (impedir√≠an Dev Services):
# %test.quarkus.datasource.jdbc.url=...
# %test.quarkus.datasource.username=...
# %test.quarkus.datasource.password=...

# Si quieres especificar la imagen de PostgreSQL para tests (opcional):
# %test.quarkus.datasource.devservices.image-name=postgres:16-alpine

# ============================================================================
# RESUMEN DE PERFILES
# ============================================================================
# ./mvnw quarkus:dev              ‚Üí Perfil DEV  ‚Üí PostgreSQL 16 local (localhost:5432)
# ./mvnw test                     ‚Üí Perfil TEST ‚Üí Docker autom√°tico (Dev Services con PostgreSQL 16)
# java -jar -Dquarkus.profile=prod ‚Üí Perfil PROD ‚Üí Variables de entorno