================================================================================
REPORTE DE PRUEBAS FUNCIONALES
Sistema de Pre-AprobaciÃ³n Crediticia Express
================================================================================

Fecha de ejecuciÃ³n: 2025-11-24 14:40:20
Microservicio: http://localhost:8080
Generado por: test-aprobacion.sh
Sistema operativo: Darwin

Este reporte contiene los resultados de la baterÃ­a completa de pruebas
funcionales del sistema de pre-aprobaciÃ³n crediticia, incluyendo:
- Health checks y mÃ©tricas
- Casos de aprobaciÃ³n (clientes con buen perfil)
- Casos de rechazo (lista negra, deuda alta, validaciones)
- Operaciones CRUD (consultas, listados)

================================================================================


============================================================================
ğŸš€ PRUEBAS FUNCIONALES - SISTEMA DE PRE-APROBACIÃ“N CREDITICIA
============================================================================


PRUEBAS INCLUIDAS:
   1. Health Checks (liveness y readiness)
   2. MÃ©tricas Prometheus
   3. EstadÃ­sticas del sistema
   4. CreaciÃ³n de solicitudes (casos variados)
   5. Consulta de solicitudes
   6. Listado con paginaciÃ³n
   7. Validaciones de negocio

CASOS DE PRUEBA:
   âœ… Cliente perfil excelente â†’ APROBADO
   âœ… Cliente con garantÃ­a â†’ APROBADO
   âŒ Cliente en lista negra â†’ RECHAZADO
   âŒ Cliente con deuda muy alta â†’ RECHAZADO
   âŒ Validaciones de entrada â†’ ERROR 400

â„¹ Verificando que el servicio estÃ© disponible...
âœ“ Servicio disponible!

============================================================================
ğŸš€ PRUEBA 1: HEALTH CHECKS
============================================================================


>>> 1.1 - Liveness Probe (Â¿EstÃ¡ vivo?)

â„¹ Verificando endpoint: http://localhost:8080/q/health/live
Respuesta:
{
  "status": "UP",
  "checks": []
}
âœ“ TEST #1: Health check - Liveness

>>> 1.2 - Readiness Probe (Â¿EstÃ¡ listo?)

â„¹ Verificando endpoint: http://localhost:8080/q/health/ready
Respuesta:
{
  "status": "UP",
  "checks": [
    {
      "name": "Database connections health check",
      "status": "UP",
      "data": {
        "<default>": "UP"
      }
    }
  ]
}
âœ“ TEST #2: Health check - Readiness

============================================================================
ğŸ“Š PRUEBA 2: MÃ‰TRICAS PROMETHEUS
============================================================================


>>> 2.1 - Endpoint de mÃ©tricas

â„¹ Obteniendo mÃ©tricas de: http://localhost:8080/q/metrics
Primeras 20 lÃ­neas de mÃ©tricas:
# TYPE http_server_requests_seconds summary
# HELP http_server_requests_seconds HTTP server request processing time
http_server_requests_seconds_count{method="GET",outcome="CLIENT_ERROR",status="404",uri="/api/preaprobacion/{id}"} 1.0
http_server_requests_seconds_sum{method="GET",outcome="CLIENT_ERROR",status="404",uri="/api/preaprobacion/{id}"} 0.015809042
http_server_requests_seconds_count{method="GET",outcome="SUCCESS",status="200",uri="/api/preaprobacion/estadisticas"} 1.0
http_server_requests_seconds_sum{method="GET",outcome="SUCCESS",status="200",uri="/api/preaprobacion/estadisticas"} 0.381464291
http_server_requests_seconds_count{method="POST",outcome="CLIENT_ERROR",status="400",uri="/api/preaprobacion/evaluar"} 2.0
http_server_requests_seconds_sum{method="POST",outcome="CLIENT_ERROR",status="400",uri="/api/preaprobacion/evaluar"} 0.009895208
http_server_requests_seconds_count{method="GET",outcome="SUCCESS",status="200",uri="/api/preaprobacion/listar"} 1.0
http_server_requests_seconds_sum{method="GET",outcome="SUCCESS",status="200",uri="/api/preaprobacion/listar"} 0.024089917
http_server_requests_seconds_count{method="POST",outcome="SUCCESS",status="200",uri="/api/preaprobacion/evaluar"} 4.0
http_server_requests_seconds_sum{method="POST",outcome="SUCCESS",status="200",uri="/api/preaprobacion/evaluar"} 0.717593833
# TYPE http_server_requests_seconds_max gauge
# HELP http_server_requests_seconds_max HTTP server request processing time
http_server_requests_seconds_max{method="GET",outcome="CLIENT_ERROR",status="404",uri="/api/preaprobacion/{id}"} 0.0
http_server_requests_seconds_max{method="GET",outcome="SUCCESS",status="200",uri="/api/preaprobacion/estadisticas"} 0.0
http_server_requests_seconds_max{method="POST",outcome="CLIENT_ERROR",status="400",uri="/api/preaprobacion/evaluar"} 0.0
http_server_requests_seconds_max{method="GET",outcome="SUCCESS",status="200",uri="/api/preaprobacion/listar"} 0.0
http_server_requests_seconds_max{method="POST",outcome="SUCCESS",status="200",uri="/api/preaprobacion/evaluar"} 0.0
# TYPE jvm_memory_used_bytes gauge
...
(Total:      280 lÃ­neas)
âœ“ TEST #3: MÃ©tricas Prometheus disponibles

============================================================================
ğŸ“Š PRUEBA 3: ESTADÃSTICAS DEL SISTEMA
============================================================================


>>> 3.1 - Consultar estadÃ­sticas generales

â„¹ Obteniendo estadÃ­sticas de: http://localhost:8080/api/preaprobacion/estadisticas
EstadÃ­sticas:
{
  "tasaAprobacion": 57.14,
  "totalSolicitudes": 22,
  "enEvaluacion": 0,
  "pendientes": 1,
  "rechazadas": 9,
  "aprobadas": 12
}
âœ“ TEST #4: Consultar estadÃ­sticas del sistema

============================================================================
âœ… PRUEBA 4: SOLICITUD APROBADA - CLIENTE PERFIL EXCELENTE
============================================================================


>>> 4.1 - Crear solicitud (Cliente con excelente perfil crediticio)

â„¹ Enviando solicitud (DNI: 70001234)...

â„¹ Resultado de la evaluaciÃ³n:
{
  "solicitudId": 65,
  "aprobado": true,
  "scoreCalculado": 795,
  "montoMaximoAprobado": 50000.00,
  "tasaInteres": 9.50,
  "plazoMaximoMeses": 84,
  "motivosRechazo": [],
  "recomendaciones": [],
  "tiempoEvaluacionMs": 81,
  "fechaEvaluacion": "2025-11-24T14:43:10.136438",
  "nivelRiesgo": "BAJO"
}
âœ“ Solicitud APROBADA como se esperaba
âœ“ TEST #5: Cliente perfil excelente aprobado

============================================================================
âœ… PRUEBA 5: SOLICITUD APROBADA - CLIENTE CON GARANTÃA
============================================================================


>>> 5.1 - Crear solicitud (Cliente con garantÃ­a)

â„¹ Enviando solicitud (DNI: 70005678 con garantÃ­a)...

â„¹ Resultado de la evaluaciÃ³n:
{
  "solicitudId": 66,
  "aprobado": true,
  "scoreCalculado": 761,
  "montoMaximoAprobado": 30000.00,
  "tasaInteres": 9.50,
  "plazoMaximoMeses": 84,
  "motivosRechazo": [],
  "recomendaciones": [],
  "tiempoEvaluacionMs": 157,
  "fechaEvaluacion": "2025-11-24T14:43:39.116281",
  "nivelRiesgo": "BAJO"
}
âœ“ Solicitud APROBADA como se esperaba
âœ“ TEST #6: Cliente con garantÃ­a aprobado

============================================================================
âŒ PRUEBA 6: SOLICITUD RECHAZADA - CLIENTE EN LISTA NEGRA
============================================================================


>>> 6.1 - Crear solicitud (Cliente en lista negra del bureau)

â„¹ Enviando solicitud (DNI: 12345678 estÃ¡ en lista negra)...

â„¹ Resultado de la evaluaciÃ³n:
{
  "solicitudId": 67,
  "aprobado": false,
  "scoreCalculado": 537,
  "motivosRechazo": [
    "Cliente figura en lista negra del bureau crediticio"
  ],
  "recomendaciones": [],
  "tiempoEvaluacionMs": 152,
  "fechaEvaluacion": "2025-11-24T14:43:56.404419",
  "nivelRiesgo": "CRITICO"
}
âœ“ Solicitud RECHAZADA como se esperaba
â„¹ Motivo: Cliente en lista negra del bureau
âœ“ TEST #7: Cliente lista negra rechazado

============================================================================
âŒ PRUEBA 7: SOLICITUD RECHAZADA - RATIO DEUDA/INGRESO ALTO
============================================================================


>>> 7.1 - Crear solicitud (Cliente con deuda muy alta)

â„¹ Enviando solicitud (deuda 5x mayor que ingreso)...

â„¹ Resultado de la evaluaciÃ³n:
{
  "solicitudId": 68,
  "aprobado": false,
  "scoreCalculado": 643,
  "motivosRechazo": [
    "Ratio deuda/ingreso demasiado alto (mÃ¡ximo aceptable: 40%)"
  ],
  "recomendaciones": [
    "Reduzca su nivel de endeudamiento actual antes de solicitar nuevo crÃ©dito"
  ],
  "tiempoEvaluacionMs": 116,
  "fechaEvaluacion": "2025-11-24T14:44:23.717247",
  "nivelRiesgo": "ALTO"
}
âœ“ Solicitud RECHAZADA como se esperaba
âœ“ TEST #8: Cliente deuda alta rechazado

============================================================================
âš ï¸ PRUEBA 8: VALIDACIONES DE ENTRADA
============================================================================


>>> 8.1 - Solicitud con datos invÃ¡lidos (ingreso negativo)

â„¹ Enviando solicitud con ingreso negativo (debe ser rechazada)...
âœ“ ValidaciÃ³n funcionÃ³ correctamente (HTTP 400)
âœ“ TEST #9: ValidaciÃ³n de ingreso negativo

>>> 8.2 - Solicitud con edad menor a 18 aÃ±os

â„¹ Enviando solicitud con edad = 17 aÃ±os (debe ser rechazada)...
âœ“ ValidaciÃ³n funcionÃ³ correctamente (HTTP 400)
âœ“ TEST #10: ValidaciÃ³n de edad mÃ­nima

============================================================================
â„¹ï¸ PRUEBA 9: CONSULTA DE SOLICITUDES
============================================================================


>>> 9.1 - Consultar solicitud por ID

âš  No se pudo obtener ID de solicitud, omitiendo prueba

>>> 9.2 - Consultar solicitud inexistente

â„¹ Consultando solicitud ID: 999999...
âœ“ Respuesta correcta para solicitud inexistente (HTTP 404)
âœ“ TEST #11: Consultar solicitud inexistente

============================================================================
ğŸ“Š PRUEBA 10: LISTADO DE SOLICITUDES
============================================================================


>>> 10.1 - Listar todas las solicitudes (pÃ¡gina 0, tamaÃ±o 5)

â„¹ Obteniendo lista...
Resultado:
{
  "total": 26,
  "size": 5,
  "totalPages": 6,
  "page": 0,
  "solicitudes": [
    {
      "id": 1,
      "numeroDocumento": "45678901",
      "tipoDocumento": "DNI",
      "nombreCompleto": "MarÃ­a Elena FernÃ¡ndez Torres",
      "ingresoMensual": 8500.00,
      "montoSolicitado": 50000.00,
      "deudaActual": 5000.00,
      "antiguedadLaboralAnios": 12,
      "edad": 38,
      "tieneGarantia": true,
      "tipoGarantia": "HIPOTECARIA",
      "fechaSolicitud": "2025-10-20T10:30:00",
      "estado": "APROBADO",
      "scoreCalculado": 820,
      "montoAprobado": 50000.00,
      "tasaInteres": 10.00,
      "plazoMaximoMeses": 84,
      "tiempoEvaluacionMs": 145,
      "fechaEvaluacion": "2025-10-20T10:30:00"
    },
    {
      "id": 2,
      "numeroDocumento": "56789012",
      "tipoDocumento": "DNI",
      "nombreCompleto": "Carlos Alberto Mendoza RÃ­os",
      "ingresoMensual": 5000.00,
      "montoSolicitado": 30000.00,
      "deudaActual": 8000.00,
      "antiguedadLaboralAnios": 6,
      "edad": 42,
      "tieneGarantia": true,
      "tipoGarantia": "VEHICULAR",
      "fechaSolicitud": "2025-10-21T14:15:00",
      "estado": "APROBADO",
      "scoreCalculado": 685,
      "montoAprobado": 30000.00,
      "tasaInteres": 12.50,
      "plazoMaximoMeses": 60,
      "tiempoEvaluacionMs": 152,
      "fechaEvaluacion": "2025-10-21T14:15:00"
    },
    {
      "id": 3,
      "numeroDocumento": "22222222",
      "tipoDocumento": "DNI",
      "nombreCompleto": "Pedro JosÃ© RamÃ­rez GÃ³mez",
      "ingresoMensual": 3500.00,
      "montoSolicitado": 15000.00,
      "deudaActual": 7000.00,
      "antiguedadLaboralAnios": 3,
      "edad": 35,
      "tieneGarantia": false,
      "tipoGarantia": null,
      "fechaSolicitud": "2025-10-22T09:45:00",
      "estado": "APROBADO",
      "scoreCalculado": 625,
      "montoAprobado": 15000.00,
      "tasaInteres": 15.00,
      "plazoMaximoMeses": 36,
      "tiempoEvaluacionMs": 178,
      "fechaEvaluacion": "2025-10-22T09:45:00"
    },
    {
      "id": 4,
      "numeroDocumento": "67890123",
      "tipoDocumento": "DNI",
      "nombreCompleto": "Ana Patricia Silva Montes",
      "ingresoMensual": 2500.00,
      "montoSolicitado": 20000.00,
      "deudaActual": 12000.00,
      "antiguedadLaboralAnios": 2,
      "edad": 28,
      "tieneGarantia": false,
      "tipoGarantia": null,
      "fechaSolicitud": "2025-10-22T11:20:00",
      "estado": "RECHAZADO",
      "scoreCalculado": 485,
      "montoAprobado": null,
      "tasaInteres": null,
      "plazoMaximoMeses": null,
      "tiempoEvaluacionMs": 163,
      "fechaEvaluacion": "2025-10-22T11:20:00"
    },
    {
      "id": 5,
      "numeroDocumento": "12345678",
      "tipoDocumento": "DNI",
      "nombreCompleto": "Roberto Carlos Delgado PÃ©rez",
      "ingresoMensual": 4000.00,
      "montoSolicitado": 25000.00,
      "deudaActual": 3000.00,
      "antiguedadLaboralAnios": 5,
      "edad": 40,
      "tieneGarantia": true,
      "tipoGarantia": "PRENDARIA",
      "fechaSolicitud": "2025-10-22T16:00:00",
      "estado": "RECHAZADO",
      "scoreCalculado": 320,
      "montoAprobado": null,
      "tasaInteres": null,
      "plazoMaximoMeses": null,
      "tiempoEvaluacionMs": 141,
      "fechaEvaluacion": "2025-10-22T16:00:00"
    }
  ]
}
â„¹ Total de solicitudes en BD: 26
âœ“ TEST #12: Listar solicitudes con paginaciÃ³n

============================================================================
ğŸ“Š RESUMEN DE PRUEBAS
============================================================================


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    RESULTADOS FINALES                          â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Total de pruebas:    12                                        â•‘
â•‘ Pruebas exitosas:    12                                        â•‘
â•‘ Pruebas fallidas:    0                                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Â¡TODAS LAS PRUEBAS PASARON EXITOSAMENTE! ğŸš€

CONCLUSIÃ“N: Sistema funcionando correctamente. Todas las pruebas pasadas.

================================================================================
FIN DEL REPORTE
================================================================================

Archivo generado: test-report-2025-11-24-144020.txt
Fecha: 2025-11-24 14:45:16

Para mÃ¡s informaciÃ³n, consulta:
- README.md: GuÃ­a de usuario
- TEORIA.md: Conceptos tÃ©cnicos
- INSTRUCTOR.md: GuÃ­a del profesor

================================================================================
âœ“ Reporte guardado en: test-report-2025-11-24-144020.txt
